
<header id="header-md" class="d-flex d-lg-none justify-content-between px-2">        
    <a class="ml-2 text-white font-exo" href="{% url 'home' %}">Brazen Martial Arts</a>
    <span class="d-inline-block">
        <button id="toggle-sm-search" class="text-white mx-sm-3 mx-2 bg-transparent"><i class="fas fa-search"></i></button>
        <button id="toggle-sm-bag" class="text-white mx-sm-3 m-2 bg-transparent"><i class="fas fa-shopping-bag"></i></button>
        <button id="toggle-side-nav" class="text-white mx-sm-3 m-2 bg-transparent mr-2"><i class="fas fa-list-ul"></i></button>
    </span>
</header>

<span id="search-menu-sm" class="w-100 d-lg-none">
    <form method="GET" action="{% url 'products' %}" class="mx-auto m-0 search-form d-flex">
        <input name="q" class="px-3" type="text" placeholder="Search Products...">
        <button class="px-2" type="submit"><i class="fas fa-search"></i></button>
    </form>
</span>

<div id="bag-sm-menu" class="d-lg-none">
    <div class="mx-auto">
        <div class="mx-auto">
            <p class="text-center m-0 h2 p-2 bg-pale-white">My Shopping Bag</p>
        </div>
        {% if product_count > 0 %}
            <div class="mx-auto bg-pale-blue mb-2 p-2">
                <p class="m-0 d-flex justify-content-between px-2"><span>{{ product_count }} items in bag</span><span>Sub-Total: £{{ total }}</span></p>
            </div>
            <div class="mx-auto bg-pale-blue my-2 p-2 d-flex justify-content-around">
                <a class="btn btn-primary d-inline-block" href="{% url 'view_bag' %}">VIEW BAG</a>
                <a class="btn btn-primary d-inline-block" href="{% url 'checkout' %}">CHECKOUT</a>
            </div>
        {% endif %}
    </div>
    {% for item in bag_items %}
        <div class="row bg-pale-white mx-auto mb-2 py-2">
            <div class="col-3 p-0 pl-2">
                <a href="{% url 'product_details' item.product.product_id %}">
                    <img class="img-container-bag-menu" src="../../media/{{ item.product.image }}" alt="{{ item.product.name }}">
                </a>
            </div>
            <div class="col-9 d-flex flex-column px-3 pl-4">                        
                <div class="w-100 d-flex flex-column bg-transparent">
                    <a href="{% url 'product_details' item.product.product_id %}" class="text-left pl-1 w-100">{{ item.product.name }}</a>
                    {% if item.size != 'false' %}
                        <p class="m-0 mt-2 w-100 text-left"><span><em class="mr-1">Size:</em> {{ item.size }}</span></p>
                    {% endif %}
                </div>
                <div class="text-right w-100 mt-2 d-flex justify-content-between"><span><em class="mr-1">Quantity:</em> {{ item.qty }}</span>£{{ item.product.price }}</div>
            </div>
        </div>
    {% endfor %}  
    {% if product_count == 0 %}
        <div class="mx-auto">
            <p class="text-center bg-pale-white p-3">Your bag is currently empty</p>
        </div>
    {% endif %}
    <!-- Display this second menu if product_count is greater than 3. So a user does not have to scroll up to the first menu -->
    {% if product_count > 3 %}
        <div class="mx-auto bg-pale-blue my-2 p-2">
            <p class="m-0 text-white d-flex justify-content-between px-2"><span>{{ product_count }} items in bag</span><span>Sub-Total: £{{ total }}</span></p>
        </div>
        <div class="mx-auto bg-pale-blue my-2 p-2 d-flex justify-content-around">
            <a class="btn btn-primary d-inline-block" href="{% url 'view_bag' %}">VIEW BAG</a>
            <a class="btn btn-primary d-inline-block" href="{% url 'checkout' %}">CHECKOUT</a>
        </div>
    {% endif %}
</div>

<div id="side-nav" class="d-lg-none">
    <hr class="m-0">
    <div class="d-flex flex-column">
        <a class="text-white h5 w-100 p-3 text-center m-0" href="{% url 'home' %}"><i class="fas fa-home"></i> Home</a>
        <div class="d-flex">
            {% if request.user.is_authenticated %}
                {% if request.user.is_superuser %}
                    <a href="#" class="w-100 text-center m-0 p-3 text-white h5">Product Management</a>
                {% endif %}
                <a href="{% url 'account_logout' %}" class="w-100 text-center m-0 p-3 text-white h5">Logout</a>
            {% else %}
                <a href="{% url 'account_signup' %}" class="w-100 text-center m-0 p-3 text-white h5"><u>Register</u></a>
                <a href="{% url 'account_login' %}" class="w-100 text-center m-0 p-3 text-white h5"><u>Login</u></a>
            {% endif %}
        </div>
    </div>
    <hr class="m-0">
    <nav id="product-menu" class="p-0">
        <ul class="p-0 list-unstyled w-100">
            <li class="p-3 m-0 h3 text-center toggle-sub-menu">
                <span class="d-flex align-items-center justify-content-center">BJJ <i class="fas fa-chevron-down"></i></span>
                <ul class="list-unstyled mt-3">
                    <li><a class="text-white btn p-2" href="{% url 'products' %}?category=bjj&product_type=gi">Gi</a></li>
                    <li><a class="text-white btn p-2" href="{% url 'products' %}?category=bjj&product_type=belts">Belts</a></li>
                    <li><a class="text-white btn p-2" href="{% url 'products' %}?category=bjj&product_type=rash guards">Rash Guards</a></li>
                    <li><a class="text-white btn p-2" href="{% url 'products' %}?category=bjj&product_type=spats">Spats</a></li>
                    <li><a class="text-white btn p-2" href="{% url 'products' %}?category=bjj&product_type=shorts">Shorts</a></li>
                    <li><a class="text-white btn p-2" href="{% url 'products' %}?category=bjj">All Products</a></li>
                </ul>
            </li>
            <li class="p-3 m-0 h3 text-center toggle-sub-menu">
                <span class="d-flex align-items-center justify-content-center">MMA <i class="fas fa-chevron-down"></i></span>
                <ul class="list-unstyled mt-3">
                    <li><a class="text-white btn" href="{% url 'products' %}?category=mma&product_type=gloves">Gloves</a></li>
                    <li><a class="text-white btn" href="{% url 'products' %}?category=mma&product_type=shorts">Shorts</a></li>
                    <li><a class="text-white btn" href="{% url 'products' %}?category=mma&product_type=handwraps">Handwraps</a></li>
                    <li><a class="text-white btn" href="{% url 'products' %}?category=mma&product_type=shin guards">Shin Guards</a></li>
                    <li><a class="text-white btn" href="{% url 'products' %}?category=mma&product_type=mouth guards">Mouth Guards</a></li>
                    <li><a class="text-white btn" href="{% url 'products' %}?category=mma">All Products</a></li>
                </ul>
            </li>
            <li class="p-3 m-0 h3 text-center toggle-sub-menu">
                <span class="d-flex align-items-center justify-content-center">Muay Thai <i class="fas fa-chevron-down"></i></span>
                <ul class="list-unstyled mt-3">
                    <li><a class="text-white btn" href="{% url 'products' %}?category=muay thai&product_type=gloves">Gloves</a></li>
                    <li><a class="text-white btn" href="{% url 'products' %}?category=muay thai&product_type=shorts">Shorts</a></li>
                    <li><a class="text-white btn" href="{% url 'products' %}?category=muay thai&product_type=handwraps">Handwraps</a></li>
                    <li><a class="text-white btn" href="{% url 'products' %}?category=muay thai&product_type=shin guards">Shin Guards</a></li>
                    <li><a class="text-white btn" href="{% url 'products' %}?category=muay thai&product_type=mouth guards">Mouth Guards</a></li>
                    <li><a class="text-white btn" href="{% url 'products' %}?category=muay thai">All Products</a></li>
                </ul>
            </li>
            <li class="p-3 m-0 h3 text-center">
                <span><a class="text-white" href="{% url 'products' %}">All Products</a></span>
            </li>
        </ul>
    </nav>
</div>

