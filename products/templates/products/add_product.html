{% extends 'base.html' %}
{% load static %}

{% block meta_description %}
    <meta name="Description" content="Add product page"/>
{% endblock %}

{% block title %}
 - Add Product
{% endblock %}

{% block css %}
    <style>
        #product-management {
            background-color: whitesmoke;
            width: 38rem;
        }
        #product-management h2 {
            border-bottom: 1px solid rgba(0, 0, 0, 0.2);
            background-color: rgba(0, 0, 0, 0.1);
        }
        .bold,
        label {
            font-weight: 600;
        }
        button {
            font-size: 1rem;
        }
        .border-top {
            border-top: 1px solid rgba(0, 0, 0, 0.2);
        }

        .btn-file {
            position: relative;
            overflow: hidden;
        }
        .btn-file input[type="file"] {
            position: absolute;
            top: 0;
            right: 0;
            min-width: 100%;
            min-height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        .custom-checkbox .custom-control-label::before {
            border-radius: 0;
            border-color: #dc3545;
        }
        .custom-checkbox .custom-control-input:checked~.custom-control-label::before {
            background-color: #dc3545;
            border-color: #dc3545;
            border-radius: 0;
        }
        .input-width {
            width: 100%;
        }
        .form-group {
            width: 100%;
            padding: 0.5rem;
        }
        #inline-form .form-group:last-of-type {
            display: none;
        }
        @media only screen and (max-width: 992px) {
            #product-management {
                width: 100%;
            }
        }

    </style>
{% endblock %}

{% block content %}


        <div id="product-management" class="mx-auto">
            <h2 class="text-center bold p-3 m-0">Product Management</h2>
            <h5 class="text-center bold p-3 m-0">ADD A NEW PRODUCT</h5>
            <form class="d-flex flex-column w-100 p-md-5 p-2" method="POST" action="{% url 'add_product' %}" enctype="multipart/form-data">
                {% csrf_token %}
                {{ form|crispy }}             
                <div id="inline-form" class="d-flex flex-column">   
                    {{ formset.management_form }}
                    {% for inlineform in formset %}
                    <div class="d-flex justify-content-around">
                        {{ inlineform|crispy }}
                    </div>
                    {% endfor %}
                </div>
                <div class="border-top pt-3">
                    <button id="add-new-product-submit" class="btn my-3 w-100 btn-primary" type="submit">Add Product</button>
                </div>
            </form>
        </div>


{% endblock %}

{% block js %}
    <script>
        $('#new-image').change(function() {
            var file = $('#new-image')[0].files[0];
            $('#filename').text(`Image will be set to: ${file.name}`);
        });
    </script>
{% endblock %}